{# eos - TerminAttr #}
{% if daemon_terminattr is arista.avd.defined %}
{%     set cvp_config = namespace() %}
!
daemon TerminAttr
{%     set cvp_config.cli = "exec /usr/bin/TerminAttr" %}
{%     if daemon_terminattr.clusters | length > 1 %}
{%         for cluster_name in daemon_terminattr.clusters | arista.avd.natural_sort %}
{%             set cluster = daemon_terminattr.clusters[cluster_name] %}
{%             set cvp_config.cli = cvp_config.cli ~  " -cvopt " ~ cluster_name ~ ".addr=" ~ cluster.cvaddrs | join(',') %}
{%             if cluster.cvauth.method == 'key' %}
{%                 set cvp_config.cli = cvp_config.cli ~ " -cvopt " ~ cluster_name ~ ".auth=key," ~ cluster.cvauth.key %}
{%             elif cluster.cvauth.method == 'token' %}
{%                 set cvp_config.cli = cvp_config.cli ~ " -cvopt " ~ cluster_name ~ ".auth=token," ~ cluster.cvauth.token_file %}
{%             elif cluster.cvauth.method == 'secure-token' %}
{%                 set cvp_config.cli = cvp_config.cli ~ " -cvopt " ~ cluster_name ~ ".auth=token-secure," ~ cluster.cvauth.token_file %}
{%             endif%}
{%             if cluster.cvvrf is arista.avd.defined %}
{%                 set cvp_config.cli = cvp_config.cli ~ " -cvopt " ~ cluster_name ~ ".vrf=" ~ cluster.cvvrf %}
{%             endif%}
{%             if cluster.cvsourceip is arista.avd.defined %}
{%                 set cvp_config.cli = cvp_config.cli ~ " -cvopt " ~ cluster_name ~ ".sourceip=" ~ cluster.cvsourceip %}
{%             endif%}
{%             if cluster.cvproxy is arista.avd.defined %}
{%                 set cvp_config.cli = cvp_config.cli ~ " -cvopt " ~ cluster_name ~ ".proxy=" ~ cluster.cvproxy %}
{%             endif%}
{%             if cluster.cvobscurekeyfile is arista.avd.defined %}
{%                 set cvp_config.cli = cvp_config.cli ~ " -cvopt " ~ cluster_name ~ ".obscurekeyfile=" ~ cluster.cvobscurekeyfile %}
{%             endif%}
{%         endfor %}
{%     endif %}
{%     if daemon_terminattr.cvaddrs is arista.avd.defined %}
{%         set cvp_config.cli = cvp_config.cli ~ " -cvaddr=" ~ daemon_terminattr.cvaddrs | join(',') %}
{%         if daemon_terminattr.cvauth.method == 'key' %}
{%             set cvp_config.cli = cvp_config.cli ~ " -cvauth=key," ~ daemon_terminattr.cvauth.key %}
{%         elif daemon_terminattr.cvauth.method == 'token' %}
{%             set cvp_config.cli = cvp_config.cli ~ " -cvauth=token," ~ daemon_terminattr.cvauth.token_file %}
{%         elif daemon_terminattr.cvauth.method == 'secure-token' %}
{%             set cvp_config.cli = cvp_config.cli ~ " -cvauth=token-secure," ~ daemon_terminattr.cvauth.token_file %}
{%         endif %}
{%     endif %}
{%     if daemon_terminattr.cvvrf is arista.avd.defined %}
{%         set cvp_config.cli = cvp_config.cli ~ " -cvvrf=" ~ daemon_terminattr.cvvrf %}
{%     endif%}
{%     if daemon_terminattr.cvsourceip is arista.avd.defined %}
{%         set cvp_config.cli = cvp_config.cli ~ " -cvsourceip=" ~ daemon_terminattr.cvsourceip %}
{%     endif%}
{%     if daemon_terminattr.cvgnmi is arista.avd.defined %}
{%         set cvp_config.cli = cvp_config.cli ~ " -cvgnmi" %}
{%     endif%}
{%     if daemon_terminattr.cvobscurekeyfile is true %}
{%         set cvp_config.cli = cvp_config.cli ~ " -cvobscurekeyfile" %}
{%     endif%}
{%     if daemon_terminattr.disable_aaa is true %}
{%         set cvp_config.cli = cvp_config.cli ~ " -disableaaa" %}
{%     endif%}
{%     if daemon_terminattr.cvproxy is arista.avd.defined %}
{%         set cvp_config.cli = cvp_config.cli ~ " -cvproxy=" ~ daemon_terminattr.cvproxy %}
{%     endif%}
{%     if daemon_terminattr.grpcaddr is arista.avd.defined %}
{%         set cvp_config.cli = cvp_config.cli ~ " -grpcaddr=" ~ daemon_terminattr.grpcaddr %}
{%     endif%}
{%     if daemon_terminattr.grpcreadonly is true %}
{%         set cvp_config.cli = cvp_config.cli ~ " -grpcreadonly" %}
{%     endif%}
{%     if daemon_terminattr.smashexcludes  %}
{%         set cvp_config.cli = cvp_config.cli ~ " -smashexcludes=" ~ daemon_terminattr.smashexcludes %}
{%     else %}
{%         set cvp_config.cli = cvp_config.cli ~ " -smashexcludes=" %}
{%     endif %}
{%     if daemon_terminattr.ingestexclude  %}
{%         set cvp_config.cli = cvp_config.cli ~ " -ingestexclude=" ~ daemon_terminattr.ingestexclude %}
{%     else %}
{%         set cvp_config.cli = cvp_config.cli ~ " -ingestexclude=" %}
{%     endif %}
{%     if daemon_terminattr.taillogs is arista.avd.defined  %}
{%         set cvp_config.cli = cvp_config.cli ~ " -taillogs=" ~ daemon_terminattr.taillogs %}
{%     else %}
{%         set cvp_config.cli = cvp_config.cli ~ " -taillogs" %}
{%     endif%}
   {{ cvp_config.cli }}
   no shutdown
{% endif%}


